<!DOCTYPE html>
<html>
<head>
  <title>Ping sample</title>
</head>
<body>
  <script src="../../build/require_embedded/hubiquitus.js"></script>
  <script>
    require(['hubiquitus'], function () {
      Hubiquitus.logger.level = 'info';
      var hubiquitus = new Hubiquitus;

      hubiquitus.on('connect', function () {
        console.log('> Connected !');
        console.log('> I\'m ' + hubiquitus.id);
        hubiquitus.send('ping', 'PING', function (err, from, content) {
          console.log('> Response : from ' + from + ' : ', err ? err : content);
        });
      });

      hubiquitus.on('disconnect', function () {
        console.log('> Disconnected !');
      });

      hubiquitus.on('message', function (from, content, reply) {
        console.log('> Message from ' + from + ' : ' + content);
      });

      hubiquitus.connect('http://localhost:8888/hubiquitus', {username: 'max'});

      setTimeout(function () {
        hubiquitus.disconnect();
      }, 10000);
    });
  </script>
</body>
</html>
